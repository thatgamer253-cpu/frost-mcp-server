# Render Blueprint — frost-mcp-server (Hardened)
# Red-Team reviewed: Bearer auth, TLS enforcement, SSRF mitigation.
#
# Deploy: Push to repo root → Render Dashboard → New Blueprint Instance

services:
  - type: web
    name: frost-mcp-server
    env: python
    region: oregon
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: python3 frost_mcp_server.py
    envVars:
      - key: PYTHON_VERSION
        value: "3.12"
      - key: MCP_AUTH_TOKEN
        generateValue: true # Secure random token generated by Render
      - key: LUMAAI_API_KEY
        sync: false # Set manually in Render dashboard
      - key: RUNWAY_API_KEY
        sync: false
      - key: GEMINI_API_KEY
        sync: false
      - key: MCP_LOG_FILE
        value: /tmp/mcp-server.log # File-based logging, no stdio interference
      - key: MCP_HEALTH_MOUNT
        value: "/.well-known"
    # Security headers — enforce HTTPS, prevent MIME sniffing
    headers:
      - path: /*
        name: Strict-Transport-Security
        value: max-age=31536000; includeSubDomains
      - path: /*
        name: X-Content-Type-Options
        value: nosniff
      - path: /*
        name: X-Frame-Options
        value: DENY
      - path: /*
        name: Content-Security-Policy
        value: "default-src 'self'"
