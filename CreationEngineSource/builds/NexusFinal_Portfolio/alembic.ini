[alembic]
# This is the main configuration file for Alembic.
#
# For more information, see http://alembic.sqlalchemy.org/en/latest/
#
# The script directory (where alembic stores migration scripts)
script_location = alembic

# The file used to store the current revision.
# This file is not typically committed to version control.
# It's used by Alembic to track the database state.
version_locations = alembic/versions

# A generic, placeholder URL for the database.
# This value is typically overridden by the `env.py` script,
# which loads the actual DATABASE_URL from the application's
# configuration (e.g., from environment variables or a .env file).
# This ensures that Alembic uses the same database configuration
# as the FastAPI application.
sqlalchemy.url = postgresql+asyncpg://user:password@db:5432/mydatabase

# The name of the database table used to store Alembic's revision history.
# This table will be created automatically by Alembic if it doesn't exist.
alembic_version_table = alembic_version

# The template used to generate new migration scripts.
# This uses Mako syntax.
file_template = %%(rev)s_%%(slug)s

# Set to 'true' to have Alembic generate a 'downgrade' function
# in new migration scripts, even if it's empty.
# This is useful for ensuring that every upgrade has a corresponding downgrade path.
autogenerate = false

# Logging configuration
# This section configures how Alembic logs its operations.
# It uses Python's standard logging module.
[loggers]
keys = root, alembic, sqlalchemy

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARNING
handlers = console
qualname =

[logger_alembic]
level = INFO
handlers = console
qualname = alembic

[logger_sqlalchemy]
level = WARNING
handlers = console
qualname = sqlalchemy.engine

[handler_console]
class = StreamHandler
formatter = generic
args = (sys.stderr,)

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S